---
title: Security
description: Authentication, launcher, lock task mode/pinning, device owner, DPC and managed configurations
---

import { APP_NAME } from '@/config/app';
import Link from 'fumadocs-core/link';

## 1. Settings Authentication Session

The settings page is locked using the device's biometrics or credentials (if set).

Once unlocked, it will not prompt for login for the next 5 minutes.
This persisting session duration reset each time a settings page is accessed.

When the device is locked, or the app is exited or placed in the background,
the authentication session will be revoked.

## 2. Default Launcher

By setting {APP_NAME} as the default launcher (home screen) app, any attempts to
leave the app will simply re-open it.

To do this, use the `Launcher` option in <Link href="/docs/setting-actions">Setting Actions</Link>.

## 3. App Pinning / Lock Task Mode

### 3.1. User-owned Devices

On regular user-owned devices, to improve security, enable **Ask for
PIN/pattern/password before unpinning** in your device settings.

On some devices, it may be shown as **Lock device when unpinning** or equivalent.

This setting is accessible by first finding **App Pinning**, then clicking
into the item (instead of the toggle/switch) to see additional options.

This will ensure that users cannot unpin (and thus unlock) the kiosk view without
the device first locking itself and requiring your biometrics or credentials.

For more on Android App Pinning ([screen pinning](https://developer.android.com/about/versions/lollipop/android-5.0#ScreenPinning)), refer to:

1. [Google Official Documentation](https://support.google.com/android/answer/9455138)
1. [Samsung Guide for Unpin Lock](https://www.samsung.com/sg/support/mobile-devices/pin-an-app-to-your-phone-screen-so-that-it-cant-be-closed)

When in screen pinning mode, you will not be able to launch other applications.
See the `Device Owner Mode` section for further details.

### 3.2. Device Policy Controller

If you have access to your
[Device Policy Controller (DPC)](https://developer.android.com/work/dpc/build-dpc),
or your MDM/EMM has provided an interface to do so, it is recommended that you
add {APP_NAME} to the allowlist of apps for lock task packages.

This has the benefits of:

1. removing warnings and instructions when you "lock" the app (as it is no
   longer
   [screen pinning](https://developer.android.com/about/versions/lollipop/android-5.0#ScreenPinning)
   like in user-owned devices)
1. stopping users from triggering the "unpin" action using gestures or holding
   the back and overview button, thus removing the side-effect of the device
   getting locked when users attempt to "unpin"

In
[Lock Task Mode](https://developer.android.com/work/dpc/dedicated-devices/lock-task-mode),
the only way to unlock {APP_NAME} would be using a methods provided in-app,
which are always configurable and can be disabled. The supported methods are
currently:

1. Opening the Kiosk Control Panel by either
   - holding the back button
   - tapping the screen 10 times in quick succession at your configured region
     (e.g. Top Left quadrant)
1. Adding a custom unlock shortcut (requires a physical keyboard or
   a method of that sending key combinations, e.g. `CTRL+1`)

There are also standalone applications that, when set as the device owner, can
perform the duties of a DPC. Below are instructions for two popular applications:
1. Google's [Test DPC](https://github.com/googlesamples/android-testdpc)

   - Go to `Lock Task -> Manage lock task list` and enable {APP_NAME}.

2. [OwnDroid](https://github.com/BinTianqi/OwnDroid)

   - Go to `System -> Lock Task Mode -> Applications` and add {APP_NAME}'s package
   name, which you can find in the [Settings -> About](/docs/settings/about) screen.

Finally, if you are writing your own DPC, the kotlin code to achieve this would be:

```kt
val APP_PACKAGES = arrayOf(
  // Choose one depending on your installation method:
  "uk.nktnet.webviewkiosk",   // GitHub, F-Droid, IzzyOnDroid, etc
  "com.nktnet.webview_kiosk", // Aurora Store, Google Play Store
)

val dpm = context.getSystemService(Context.DEVICE_POLICY_SERVICE) as DevicePolicyManager
val adminName = getComponentName(context)
dpm.setLockTaskPackages(adminName, APP_PACKAGES)
```

For more information, see
[Android's official documentation](https://developer.android.com/work/dpc/dedicated-devices/lock-task-mode#allowlist_apps).

### 3.3. Device Owner Mode

When set as the device owner, {APP_NAME} can act as a DPC and automatically adds itself to the
[allowlist for lock task packages](https://developer.android.com/work/dpc/dedicated-devices/lock-task-mode).
It is also possible for {APP_NAME} to add other applications in settings, thus allowing it to
launch other apps in Lock Task Mode (kiosk).

The easiest way is to factory reset your device and start fresh, but if this isn't possible,
you can try the following:

<Steps>

<Step>
Remove all
[additional users](https://source.android.com/docs/devices/admin/multi-user)
on your device.
</Step>

<Step>
Find all
[accounts](https://source.android.com/docs/automotive/users_accounts/accounts)
on your device, e.g. in your device settings or using an application like
[AndroidAccounts](https://github.com/iamr0s/AndroidAccounts).
</Step>

<Step>
Freeze all applications that uses accounts, e.g. Whatsapp. You can do this using [Hail](https://github.com/aistra0528/Hail/blob/master/README_EN.md).
</Step>

<Step>
Remove all accounts.
</Step>

<Step>

Set {APP_NAME} as the device owner using Android Debug Bridge (ADB) on a computer:

```sh
adb shell dpm set-device-owner uk.nktnet.webviewkiosk/.WebviewKioskAdminReceiver
```

Alternatively, you can use [Shizuku](https://github.com/RikkaApps/Shizuku) with
wireless debugging and [Termux](https://github.com/termux/termux-app) to gain
ADB access (thus skipping the PC requirement).

Refer to
[GitHub Discussion #33](https://github.com/nktnet1/webview-kiosk/discussions/33#discussioncomment-14672999)
for a video demonstration.

</Step>

</Steps>

{APP_NAME} also supports [Dhizuku](https://github.com/iamr0s/Dhizuku), a
tool that can share device owner permissions.

If you encounter any troubles with the setup, it is worth taking a look at the
[Dhizuku activation guide](https://github.com/iamr0s/Dhizuku/discussions/19),
which includes helpful debugging steps when setting up a device owner application.

## 4. Managed Configurations (App Restrictions)

For fully managed (company-owned) devices, you can use
[managed configurations](https://developer.android.com/work/managed-configurations)
to restrict and remotely modify {APP_NAME} settings through your MDM/EMM.

It is also possible to set app restrictions using [OwnDroid](https://github.com/BinTianqi/OwnDroid)
or [Test DPC](https://github.com/googlesamples/android-testdpc).

For a list of available settings, refer to
[./app/src/main/res/xml/app_restrictions.xml](https://github.com/nktnet1/webview-kiosk/blob/main/app/src/main/res/xml/app_restrictions.xml).

Below are instructions for a few popular MDM/EMM providers:

- [Google Endpoint Management](https://support.google.com/a/answer/6328701?hl=en#configure&zippy=%2Cset-up-android-apps-with-managed-configurations)
- [Microsoft Intune](https://learn.microsoft.com/en-us/intune/intune-service/apps/app-configuration-policies-managed-app)
- [Miradore](https://www.miradore.com/knowledge/android/how-to-configure-application-settings)
- [Manage Engine](https://www.manageengine.com/mobile-device-management/managed-app-configuration.html)
- [Scale Fusion](https://help.scalefusion.com/v1/docs/application-configurations-for-android-applications)
- [Hexnode](https://www.hexnode.com/mobile-device-management/help/set-up-permissions-and-configurations-for-an-app-using-hexnode-mdm)

At the time of writing, [Headwind MDM](https://h-mdm.com) (an open-source
platform to manage android device) does not yet support managed configurations,
but this is [on their roadmap for the future](https://github.com/h-mdm/hmdm-server/issues/49#issuecomment-3574073134).
